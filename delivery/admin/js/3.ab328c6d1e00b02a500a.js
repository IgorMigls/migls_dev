webpackJsonp([3],{138:function(t,e,a){"use strict";function i(t){a(153)}Object.defineProperty(e,"__esModule",{value:!0});var c=a(150),r=a(155),s=a(59),d=i,n=s(c.a,r.a,!1,d,"data-v-6f8f9cdc",null);e.default=n.exports},150:function(t,e,a){"use strict";var i=a(25),c=a.n(i),r=a(60),s=a.n(r),d=a(10),n=a(37);e.a={name:"product-detail",props:{detail:{type:Object,required:!0},showQuantity:{type:Boolean,default:function(){return!0}},showReplaces:{type:Boolean}},data:function(){return{product:this.detail,quantity:1,inputPlus:[{icon:"add",handler:this.plus}],inputMinus:[{icon:"remove",handler:this.minus}],quantityError:!1,replaceWinOpen:!1,searchProduct:"",searchIcon:[{icon:"search",handler:this.searchGo}],isFounded:!1}},methods:s()({},Object(n.b)(["fetchReplaces","addReplaceToBasket"]),{plus:function(){var t=this.product.MEASURE_RATIO>0?this.product.MEASURE_RATIO:1;this.quantity<this.detail.BASKET_DATA.QUANTITY&&(this.quantity+=t)},minus:function(){var t=this.product.MEASURE_RATIO>0?this.product.MEASURE_RATIO:1;this.quantity>0&&(this.quantity-=t)},foundedSet:function(){this.$emit("founded",{product:this.product,count:this.quantity,sum:this.sum}),this.$emit("hide")},openReplaces:function(){var t=this.detail.NAME.split(" "),e={q:t[0],sku:this.detail.SKU_ID,product:this.detail.PRODUCT_ID,quantity:this.detail.BASKET_DATA.QUANTITY,orderId:this.detail.BASKET_DATA.ORDER_ID};this.replaceWinOpen=!0,this.fetchReplaces(e)},closeReplaces:function(){this.replaceWinOpen=!1},searchGo:function(){if(this.searchProduct.length>2){var t={q:this.searchProduct,sku:this.detail.SKU_ID,product:this.detail.PRODUCT_ID,orderId:this.detail.BASKET_DATA.ORDER_ID};this.fetchReplaces(t)}},addReplace:function(t){var e=this;this.addReplaceToBasket({replace:t,basketItem:this.detail}).then(function(t){null===t.data.ERRORS&&(e.product=c()({},t.data.DATA.basketItem),e.closeReplaces())})},closeDetail:function(){this.$emit("hide"),this.closeReplaces()}}),watch:{detail:function(t){this.product=t,this.product.ID&&(this.quantity=t.BASKET_DATA.QUANTITY,this.isFounded=this.founded.hasOwnProperty(this.product.BASKET_ID))},quantity:function(t){this.product.BASKET_DATA.SUM_FORMAT=this.detail.PRICE*t}},created:function(){},beforeUpdate:function(){},components:{QCard:d.e,QCardTitle:d.j,QCardSeparator:d.i,QCardMain:d.g,QCardActions:d.f,QBtn:d.d,QIcon:d.l,QCardMedia:d.h,QModal:d.u,QInput:d.m,QModalLayout:d.v,QToolbar:d.B,QToolbarTitle:d.C,QSearch:d.x},computed:s()({},Object(n.c)(["searchReplaceItems","founded"]),{sum:function(){return this.product.BASKET_DATA.SUM_FORMAT}}),mounted:function(){}}},153:function(t,e,a){var i=a(154);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a(137)("4619f879",i,!0,{})},154:function(t,e,a){e=t.exports=a(136)(!1),e.push([t.i,".product_detail[data-v-6f8f9cdc]{padding:0 15px}.product_detail .q-card-title[data-v-6f8f9cdc]{line-height:24px}.product_detail .q-card-media[data-v-6f8f9cdc]{min-height:300px;display:-ms-flexbox;display:flex;background-position:50%;background-size:contain;background-repeat:no-repeat}.product_detail-quantity[data-v-6f8f9cdc]{display:-ms-flexbox;display:flex;width:100%;-ms-flex-align:center;align-items:center;text-align:center}.product_detail-quantity .quantity_from[data-v-6f8f9cdc],.product_detail-quantity .quantity_from_txt[data-v-6f8f9cdc]{margin:auto 10px;font-size:1.1rem}.product_detail-quantity .btn_quantity[data-v-6f8f9cdc]{height:40px;margin-top:6px;padding-left:20px;padding-right:20px}.product_detail-sum[data-v-6f8f9cdc]{padding:15px}.product_replace_item[data-v-6f8f9cdc]{height:350px;display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;padding-bottom:15px}.product_replace_item .item_img[data-v-6f8f9cdc]{display:-ms-flexbox;display:flex;height:100%;max-height:200px;background-position:50%;background-repeat:no-repeat;background-size:contain}.product_replace_item-actions[data-v-6f8f9cdc]{display:-ms-flexbox;display:flex;-ms-flex-align:baseline;align-items:baseline}.product_replace_item-prices[data-v-6f8f9cdc]{margin-right:30px;font-size:1.1rem}.product_replace_item .q-card-title[data-v-6f8f9cdc]{word-break:break-all;width:100%;height:85px;font-size:16px;line-height:1.4rem}",""])},155:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.product.ID?a("q-card",{staticClass:"product_detail"},[a("q-card-title",[t._v(t._s(t.product.NAME))]),t._v(" "),t.product.IMG?a("q-card-media",{style:{"background-image":"url("+t.product.IMG.SRC+")"}}):t._e(),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-actions",[t.showQuantity?a("div",{staticClass:"product_detail-quantity"},[a("q-input",{attrs:{color:"amber",dark:"",type:"number","numeric-keyboard-toggle":"",rows:"12",align:"center",before:t.inputMinus,after:t.inputPlus,inverted:"","hide-underline":!1,error:t.quantityError},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),t._v(" "),a("span",[t._v(" "+t._s(t.product.MEASURE_SHORT_NAME))]),t._v(" "),a("span",{staticClass:"quantity_from_txt"},[t._v("из")]),t._v(" "),a("span",{staticClass:"quantity_from"},[t._v(t._s(t.product.BASKET_DATA.QUANTITY))])],1):t._e(),t._v(" "),a("q-btn",{staticClass:"btn_quantity",staticStyle:{width:"100%"},attrs:{color:"positive",icon:"check"},on:{click:t.foundedSet}},[t._v("Найдено")])],1),t._v(" "),a("q-card-main",[a("div",{staticClass:"product_detail-sum"},[a("b",[t._v("Цена: ")]),t._v(t._s(t.product.BASKET_DATA.PRICE_FORMAT)+" "),a("i",{staticClass:"fa fa-rouble"}),a("br"),t._v(" "),a("b",[t._v("Сумма: ")]),t._v(t._s(t.sum)+" "),a("i",{staticClass:"fa fa-rouble"}),a("br")])]),t._v(" "),a("q-card-main",[t.product.COMMENT?a("div",[a("b",[t._v("Комментарий: ")]),t._v(" "),a("p",[t._v(t._s(t.product.COMMENT))])]):t._e(),t._v(" "),t.product.REPLACE&&!t.isFounded?a("div",[a("b",[t._v("Рекомендуемая замена: ")]),t._v(" "),a("q-card-title",[t._v(t._s(t.product.REPLACE.NAME))]),t._v(" "),t.product.REPLACE.PICTURE?a("q-card-media",{style:{"background-image":"url("+t.product.REPLACE.PICTURE.src+")"}}):t._e(),t._v(" "),a("q-card-actions",[t.product.REPLACE?a("q-btn",{staticClass:"full-width",attrs:{color:"secondary"},on:{click:function(e){t.addReplace(t.product.REPLACE)}}},[t._v("\n\t\t\t\t\tЗаменить\n\t\t\t\t")]):t._e()],1)],1):t._e()]),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-actions",[a("q-btn",{attrs:{flat:"",icon:"keyboard_backspace"},on:{click:t.closeDetail}},[t._v("Назад")]),t._v(" "),t.showReplaces?a("q-btn",{attrs:{color:"primary"},on:{click:t.openReplaces}},[t._v("Найти замены")]):t._e()],1),t._v(" "),a("q-modal",{attrs:{"content-css":{minWidth:"80vw",minHeight:"80vh"}},model:{value:t.replaceWinOpen,callback:function(e){t.replaceWinOpen=e},expression:"replaceWinOpen"}},[a("q-modal-layout",[a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-btn",{attrs:{flat:"",round:"",dense:"",icon:"reply","wait-for-ripple":""},on:{click:t.closeReplaces}}),t._v(" "),a("q-toolbar-title",[t._v("Поиск замены")])],1),t._v(" "),a("q-toolbar",{attrs:{slot:"header"},slot:"header"},[a("q-search",{staticClass:"full-width",attrs:{inverted:"",color:"none",after:t.searchIcon,before:[]},model:{value:t.searchProduct,callback:function(e){t.searchProduct=e},expression:"searchProduct"}})],1),t._v(" "),a("div",{staticClass:"layout-padding"},t._l(t.searchReplaceItems,function(e){return t.searchReplaceItems.length>0?a("div",{staticClass:"caption"},[a("q-card",{staticClass:"product_replace_item"},[e.PICTURE?a("q-card-media",{staticClass:"item_img",style:{backgroundImage:"url("+e.PICTURE.src+")"}}):t._e(),t._v(" "),a("q-card-title",[t._v(t._s(e.NAME))]),t._v(" "),a("q-card-separator"),t._v(" "),a("q-card-main",{staticClass:"product_replace_item-actions"},[a("div",{staticClass:"product_replace_item-prices"},[t._v(t._s(e.PRICE_FORMAT)+"\n\t\t\t\t\t\t\t\t"),a("i",{staticClass:"fa fa-rouble"})]),t._v(" "),a("q-input",{attrs:{type:"number",readonly:"",placeholder:"Количество"},model:{value:t.quantity,callback:function(e){t.quantity=e},expression:"quantity"}}),t._v(" "),a("q-btn",{attrs:{color:"positive",icon:"add_shopping_cart"},on:{click:function(a){t.addReplace(e)}}})],1)],1)],1):a("div",[a("p",[t._v(" - Продукты не найдены - ")])])}))],1)],1)],1):t._e()},c=[],r={render:i,staticRenderFns:c};e.a=r}});