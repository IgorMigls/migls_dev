webpackJsonp([4],{147:function(t,e,i){"use strict";function r(t){i(187)}Object.defineProperty(e,"__esModule",{value:!0});var a=i(164),n=i(189),o=i(59),s=r,c=o(a.a,n.a,!1,s,null,null);e.default=c.exports},164:function(t,e,i){"use strict";var r=i(60),a=i.n(r),n=i(10),o=i(38),s=i.n(o),c=i(37),l=i(61);e.a={name:"order-view",data:function(){return{quantityError:!1}},props:{},methods:a()({},Object(c.b)(["getDetailOrder","lockOrder","setMyDelivery","abortMyDelivery","updateQuantityFinal","deleteProductFinal"]),{inputPlus:function(t){return console.info(t),[{icon:"add",handler:this.plus}]},addressFormat:function(t){return[t.CITY.VALUE,t.STREET.VALUE,t.HOUSE.VALUE,""!==t.APARTMENT.VALUE?"д."+t.APARTMENT.VALUE:"",""!==t.ZIP.VALUE?"подъезд "+t.ZIP.VALUE:""].join(", ")},addToComplect:function(t){var e=this;this.lockOrder(t).then(function(i){e.$router.push("/complect/"+t)})},saveComplection:function(){},crossedClass:function(t){return t.hasOwnProperty("CUSTOM")&&t.CUSTOM instanceof Object&&t.CUSTOM.REPLACE instanceof Object&&"Y"===t.CUSTOM.REPLACE.ACTIVE?"crossed-text":""},format:function(t){return l.a.priceFormat(t)},addToMyDelivery:function(t){var e=this;this.setMyDelivery(t).then(function(t){null===t.data.ERRORS&&e.$router.push("/myDelivery")})},abortDelivery:function(t){var e=this;this.abortMyDelivery(t).then(function(t){null===t.data.ERRORS&&e.$router.push("/myDelivery")})},plus:function(t){var e=this,i=t.MEASURE_RATIO>0?t.MEASURE_RATIO:1;t.BASKET_DATA.QUANTITY+=i,this.updateQuantityFinal(t).then(function(t){e.getDetailOrder({id:e.$route.params.id,name:e.$route.name}).then(function(t){})})},minus:function(t){var e=this,i=t.MEASURE_RATIO>0?t.MEASURE_RATIO:1;t.BASKET_DATA.QUANTITY-=i,t.BASKET_DATA.QUANTITY<=0&&(t.BASKET_DATA.QUANTITY=i),t.BASKET_DATA.QUANTITY>0&&this.updateQuantityFinal(t).then(function(t){e.getDetailOrder({id:e.$route.params.id,name:e.$route.name}).then(function(t){})})},deleteItem:function(t){var e=this;confirm("Вы уверены, что хотите удалить товар?")&&this.deleteProductFinal(t).then(function(t){e.getDetailOrder({id:e.$route.params.id,name:e.$route.name})})},basketPrice:function(){var t=s.a.toNumber(this.detailOrder.PRICE)-s.a.toNumber(this.detailOrder.PRICE_DELIVERY);return l.a.priceFormat(t,2)},deliveryPrice:function(){var t=s.a.toNumber(this.detailOrder.PRICE_DELIVERY);return l.a.priceFormat(t,2)}}),computed:a()({},Object(c.c)(["detailOrder"]),{showCheckBtn:function(){return"deliveryDetail"!==this.$route.name&&"myDeliveryDetail"!==this.$route.name},showToMyDelivery:function(){return"deliveryDetail"===this.$route.name},showAbortDelivery:function(){return"myDeliveryDetail"===this.$route.name},editOrder:function(){return"myDeliveryDetail"===this.$route.name}}),created:function(){this.getDetailOrder({id:this.$route.params.id,name:this.$route.name})},components:{QCard:n.e,QCardTitle:n.j,QCardSeparator:n.i,QCardMain:n.g,QCardActions:n.f,QBtn:n.d,QIcon:n.l,QCardMedia:n.h,QFixedPosition:n.k,QList:n.s,QItem:n.n,QItemSeparator:n.p,QItemMain:n.o,QInput:n.m}}},187:function(t,e,i){var r=i(188);"string"==typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);i(137)("313c71b1",r,!0,{})},188:function(t,e,i){e=t.exports=i(136)(!1),e.push([t.i,".item_product_img{text-align:center;display:-ms-flexbox;display:flex;-ms-flex-pack:center;justify-content:center;height:100%;background-position:50%;background-size:contain;background-repeat:no-repeat;max-width:120px}.detail_info,.detail_view{display:-ms-flexbox;display:flex;-ms-flex-wrap:wrap;flex-wrap:wrap}.detail_info .q-card,.detail_view .q-card{min-width:320px;font-size:.9rem;display:-ms-flexbox;display:flex;-ms-flex-direction:row;flex-direction:row;width:98%}.products_wrap .item_product{-ms-flex:2;flex:2}.products_wrap .item_product_body{-ms-flex:4;flex:4}.products_wrap .q-card-title{font-size:1.4rem}.replaces_item_view{border-top:1px solid #999}.replaces_item_view h5{font-size:1.2rem;font-weight:500}.replaces_item_view p{margin-bottom:10px}.crossed-text{text-decoration:line-through}.removed_products{-ms-flex-direction:column!important;flex-direction:column!important}.quantity_icons{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;cursor:pointer}.quantity_icons .icon_quantity{font-size:30px}",""])},189:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.detailOrder?i("div",{staticClass:"detail_view"},[i("q-list",{staticStyle:{width:"100%"}},[i("q-item",[i("q-item-main",[t._v("\n\t\t\t\tЗаказ №"+t._s(t.detailOrder.ID)+" от "+t._s(t.detailOrder.DATE_INSERT)+"\n\t\t\t")])],1),t._v(" "),i("q-item",[i("q-item-main",{attrs:{label:"Сумма"}},[i("b",[t._v("Товаров: ")]),t._v(" "+t._s(t.basketPrice())+" р."),i("br"),t._v(" "),i("b",[t._v("Доставки: ")]),t._v(" "+t._s(t.deliveryPrice())+" р."),i("br"),t._v(" "),i("b",[t._v("Итого: ")]),t._v(" "+t._s(t.detailOrder.PRICE_FORMAT)+" р."),i("br")])],1),t._v(" "),i("q-item",[i("q-item-main",{attrs:{label:"Магазин:"}},[t._v("\n\t\t\t\t"+t._s(t.detailOrder.PROPS.SHOP_CODE.VALUE)+" "+t._s(t.detailOrder.PROPS.SHOP_ADDRESS.VALUE)+"\n\t\t\t")])],1),t._v(" "),i("q-item-separator"),t._v(" "),i("q-item",[i("q-item-main",{attrs:{label:"Доставка:"}},[t._v(t._s(t.addressFormat(t.detailOrder.PROPS)))]),t._v(" "),i("q-item-main",{attrs:{label:"Время доставки:"}},[t._v(t._s(t.detailOrder.PROPS.DELIVERY_TIME.VALUE))])],1)],1),t._v(" "),i("div",{staticClass:"products_wrap"},[t._l(t.detailOrder.BASKET,function(e){return i("q-card",{key:e.ID},[i("div",{staticClass:"item_product"},[e.RESIZE?i("q-card-media",{staticClass:"item_product_img",style:{"background-image":"url("+e.RESIZE.src+")"}}):t._e()],1),t._v(" "),i("div",{staticClass:"item_product_body"},[i("q-card-title",{class:[t.crossedClass(e)]},[i("span",{domProps:{innerHTML:t._s(e.NAME)}})]),t._v(" "),i("q-card-main",[i("p",{class:[t.crossedClass(e)]},[t._v("Цена: "+t._s(e.BASKET_DATA.PRICE_FORMAT)+"р / "+t._s(e.MEASURE_SHORT_NAME))]),t._v(" "),t.editOrder?i("p",{class:[t.crossedClass(e),"quantity_icons"]},[i("span",{staticClass:"icon_quantity"},[i("q-icon",{attrs:{name:"remove_circle",color:"secondary"},on:{click:function(i){t.minus(e)}}})],1),t._v(" "),i("q-input",{attrs:{readonly:"",color:"amber",type:"number","numeric-keyboard-toggle":"",align:"center","hide-underline":!1,error:t.quantityError},model:{value:e.BASKET_DATA.QUANTITY,callback:function(i){t.$set(e.BASKET_DATA,"QUANTITY",i)},expression:"item.BASKET_DATA.QUANTITY"}}),t._v(" "),i("span",{staticClass:"icon_quantity"},[i("q-icon",{attrs:{name:"add_circle",color:"secondary"},on:{click:function(i){t.plus(e)}}})],1),t._v(" "),i("q-btn",{staticStyle:{"margin-left":"30px"},attrs:{color:"negative",flat:""},on:{click:function(i){t.deleteItem(e)}}},[t._v("Удалить\n\t\t\t\t\t\t")])],1):i("p",{class:[t.crossedClass(e)]},[t._v("Количество: "+t._s(e.BASKET_DATA.QUANTITY))]),t._v(" "),i("p",{class:[t.crossedClass(e)]},[t._v("Сумма: "+t._s(e.BASKET_DATA.SUM_FORMAT)+"р")]),t._v(" "),e.REPLACE?i("div",{staticClass:"replaces_item_view"},[i("h5",[t._v("Замена")]),t._v(" "),i("div",[e.REPLACE.PICTURE?i("q-card-media",{staticClass:"item_product_img"},[i("img",{staticClass:"img-responsive",attrs:{src:e.REPLACE.PICTURE.src}})]):t._e(),t._v(" "),i("p",[t._v(t._s(e.REPLACE.NAME))]),t._v(" "),i("p",[t._v("Цена: "+t._s(t.format(e.REPLACE.PRICE))+"р")]),t._v(" "),i("p",[t._v("Количество: "+t._s(e.REPLACE.QUANTITY))]),t._v(" "),i("p",[t._v("Сумма: "+t._s(e.REPLACE.PRICE*e.REPLACE.QUANTITY)+"р")])],1)]):t._e(),t._v(" "),null!==e.REPLACE_FROM&&e.REPLACE_FROM.ID?i("div",{staticClass:"replaces_item_view",staticStyle:{"text-decoration":"line-through"}},[i("p",[t._v(t._s(e.REPLACE_FROM.DATA.NAME))]),t._v(" "),i("p",[t._v("Цена: "+t._s(t.format(e.REPLACE_FROM.DATA.PRICE))+"р")]),t._v(" "),i("p",[t._v("Количество: "+t._s(e.REPLACE_FROM.DATA.QUANTITY))])]):t._e()])],1)])}),t._v(" "),i("q-item-separator"),t._v(" "),t.detailOrder.REMOVED?i("h4",{staticStyle:{"font-size":"20px","padding-left":"15px"}},[t._v("Удаленные товары")]):t._e(),t._v(" "),t._l(t.detailOrder.REMOVED,function(e){return i("q-card",{key:"remove_"+e.ID,staticClass:"removed_products"},[i("q-card-main",[i("p",[t._v(t._s(e.DATA.NAME))]),t._v(" "),i("p",[t._v("Количество: "+t._s(e.DATA.QUANTITY))])])],1)})],2),t._v(" "),t.showCheckBtn?i("q-fixed-position",{attrs:{corner:"bottom-right",offset:[18,18]}},[i("q-btn",{attrs:{round:"",color:"positive",icon:"check_circle"},on:{click:function(e){t.addToComplect(t.detailOrder.ID)}}})],1):t._e(),t._v(" "),t.showToMyDelivery?i("q-fixed-position",{attrs:{corner:"bottom-right",offset:[18,18]}},[i("q-btn",{attrs:{round:"",color:"positive",icon:"favorite"},on:{click:function(e){t.addToMyDelivery(t.detailOrder.ID)}}})],1):t._e(),t._v(" "),t.showAbortDelivery?i("q-fixed-position",{attrs:{corner:"bottom-right",offset:[18,18]}},[i("q-btn",{attrs:{round:"",color:"negative",icon:"lock_open"},on:{click:function(e){t.abortDelivery(t.detailOrder.ID)}}})],1):t._e()],1):t._e()},a=[],n={render:r,staticRenderFns:a};e.a=n}});