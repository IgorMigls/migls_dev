!function(t){function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}var e={};i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},i.p="/home/bitrix/ext_www/migls.io/public/",i(i.s="RyjN")}({RyjN:function(t,i,e){"use strict";var s=e("SIzL"),o=function(t){return t&&t.__esModule?t:{default:t}}(s);window.hasOwnProperty("MigBus")||(window.MigBus=new Vue);var n={data:{tabActive:"tab-0"},methods:{openShop:function(t){var i=t.replace("#",""),e=$(this.$el);e.find(".b-tabs-content").hide(0),e.find(t).show(0),this.tabActive=i}},components:{productItem:o.default},mounted:function(){var t=$(".js-products-slider"),i={dots:!1,arrows:!0,slide:".js-products-slider-item",slidesToShow:5,slidesToScroll:1};t.length&&t.slick(i);var e=$(".js-products-slider-search");e.length>0&&e.slick({dots:!1,arrows:!0,slide:".js-products-slider-item",slidesToShow:4,slidesToScroll:4})}};$(function(){$("#popular_products_app").length>0?new Vue(n).$mount("#popular_products_app"):$(".popular_products_app").length>0&&$(".popular_products_app").each(function(){new Vue(n).$mount(this)})})},SIzL:function(t,i,e){"use strict";function s(t){c||e("rrIV")}Object.defineProperty(i,"__esModule",{value:!0});var o=e("wey7"),n=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(i,t,function(){return o[t]})}(r);var a=e("rFyM"),u=e("XyMi"),c=!1,d=s,p=Object(u.a)(n.a,a.a,a.b,!1,d,null,null);p.options.__file="public/local/resource/js/product/productItem.vue",i.default=p.exports},XyMi:function(t,i,e){"use strict";function s(t,i,e,s,o,n,r,a){t=t||{};var u=typeof t.default;"object"!==u&&"function"!==u||(t=t.default);var c="function"==typeof t?t.options:t;i&&(c.render=i,c.staticRenderFns=e,c._compiled=!0),s&&(c.functional=!0),n&&(c._scopeId=n);var d;if(r?(d=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),o&&o.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=d):o&&(d=a?function(){o.call(this,this.$root.$options.shadowRoot)}:o),d)if(c.functional){c._injectStyles=d;var p=c.render;c.render=function(t,i){return d.call(i),p(t,i)}}else{var _=c.beforeCreate;c.beforeCreate=_?[].concat(_,d):[d]}return{exports:t,options:c}}i.a=s},rFyM:function(t,i,e){"use strict";e.d(i,"a",function(){return s}),e.d(i,"b",function(){return o});var s=function(){var t=this,i=t.$createElement,e=t._self._c||i;return t.product?e("div",{staticClass:"b-products-slider__item js-products-slider-item"},[e("div",{class:["b-product-preview b-ib-wrapper"]},[e("div",{staticClass:"b-product__count b-ib"},[e("span",{staticClass:"b-count__in"},[t._v(t._s(t.product.BASKET_QUANTITY)+" шт. в корзине")])]),t._v(" "),e("div",{class:["b-product__star",{active:t.inFavorite}],on:{click:t.addToFavorite}},[e("a",{staticClass:"prod__star",attrs:{href:"javascript:"}})]),t._v(" "),t.product.PRODUCT_PICTURE?e("div",{staticClass:"b-product-preview__pic b-ib"},[e("a",{attrs:{href:"#/catalog/"+t.product.PRODUCT_ID}},[e("img",{attrs:{src:t.product.PRODUCT_PICTURE.src}})])]):t._e(),t._v(" "),e("div",{staticClass:"b-product-preview__name b-ib"},[e("a",{attrs:{href:"#/catalog/"+t.product.PRODUCT_ID}},[t._v("\n\t\t\t\t"+t._s(t.product.PRODUCT_NAME)+"\n\t\t\t")])]),t._v(" "),e("div",{staticClass:"b-product-preview__price b-ib product_price_wrap"},[e("div",{staticClass:"price_item_val"},[t._v("\n\t\t\t\t"+t._s(t.product.PRICE_FORMAT)+" "),e("span",{staticClass:"b-rouble"},[t._v("₽")]),t._v(" / "+t._s(t.product.SKU.MEASURE_SHORT_NAME)+"\n\t\t\t")])]),t._v(" "),e("div",{staticClass:"b-product-preview__buy b-ib"},[t.showQuantity?t._e():e("div",{staticClass:"b-product-preview__incart b-ib"},[e("button",{staticClass:"b-button b-button_green add_basket_btn",attrs:{type:"button"},on:{click:t.addToBasket}},[t._v("В корзину")])]),t._v(" "),t.showQuantity?e("div",{staticClass:"b-product-preview-quantity"},[e("a",{staticClass:"q-minus",attrs:{href:"javascript:"},on:{click:t.minus}},[e("i",{staticClass:"el-icon-minus"})]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.quantity,expression:"quantity"}],staticClass:"quantity_input b-product-preview__input",attrs:{type:"text"},domProps:{value:t.quantity},on:{blur:t.watchQuantity,input:function(i){i.target.composing||(t.quantity=i.target.value)}}}),t._v(" "),e("a",{staticClass:"q-plus",attrs:{href:"javascript:"},on:{click:t.plus}},[e("i",{staticClass:"el-icon-plus"})]),t._v(" "),e("span",{staticClass:"input-measure"},[t._v(t._s(t.product.SKU.MEASURE_SHORT_NAME))])]):t._e()])])]):t._e()},o=[];s._withStripped=!0},rrIV:function(t,i){},wey7:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={props:{product:{type:Object,required:!0}},data:function(){return{quantity:_.toNumber(this.product.SKU.MEASURE_RATIO),showQuantity:!1,inFavorite:!1}},beforeUpdate:function(){},created:function(){},methods:{plus:function(){this.quantity=_.toNumber(this.quantity)+_.toNumber(this.product.SKU.MEASURE_RATIO),this.addToBasket(!0)},minus:function(){this.quantity=_.toNumber(this.quantity)-_.toNumber(this.product.SKU.MEASURE_RATIO),this.quantity>0?this.addToBasket(!0):(this.quantity=0,this.deleteFormBasket(this.product.PRODUCT_ID)),this.quantity=_.toNumber(this.quantity)},addToBasket:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i={quantity:this.quantity,product:this.product,sku:this.product.ID};!0===t&&(i.notify=!1),0===this.quantity&&(this.quantity=_.toNumber(this.product.SKU.MEASURE_RATIO)),window.MigBus.$emit("addToBasket",i),this.showQuantity=!0},deleteFormBasket:function(t){window.MigBus.$emit("deleteFormBasket",t),this.showQuantity=!1},watchQuantity:function(t){var i=_.toNumber(t.target.value),e=_.toNumber(this.product.SKU.MEASURE_RATIO);0===t.target.value.length?this.quantity=e:0===i?this.quantity=e:i/e%1!=0?this.quantity=_.toNumber(Math.ceil(i/e)*e):i>0&&(this.quantity=_.toNumber(i)),this.addToBasket(!0)},addToFavorite:function(){var t=this;!0!==this.inFavorite?Vue.http.post("/rest2/basket/addToFavorite",{ID:this.product.PRODUCT_ID,SKU:this.product.ID}).then(function(i){null===i.data.ERRORS&&(t.inFavorite=!0)}):Vue.http.post("/rest2/basket/delFavorite",{ID:this.product.PRODUCT_ID}).then(function(i){null===i.data.ERRORS&&(t.inFavorite=!1)})}},components:{},computed:{},mounted:function(){var t=this;window.MigBus.$on("on-quantity-"+this.product.PRODUCT_ID,function(i){t.quantity=i.QUANTITY});var i=_.toNumber(this.product.BASKET_QUANTITY);i>0&&(this.showQuantity=!0),_.isNaN(i)&&(i=1),this.quantity=i,_.isEmpty(this.product.FAVORITE)||(this.inFavorite=!0)},watch:{quantity:function(t){t>0&&(this.showQuantity=!0)}}}}});
//# sourceMappingURL=globalApp.js.map